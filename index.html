<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Stretching Routine</title>
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet">
    <link href="src/main.css" rel="stylesheet">
</head>
<body>

<div class="universe"
     x-data="app()">

    <section class="settings vertical-stack"
             x-show="state === states.SETTINGS">

        <div class="control">

            <label class="horizontal-stack">
                <span>The length of an exercise is</span>
                <input min="15"
                       max="60"
                       step="5"
                       type="number"
                       x-model.number="duration.exercise">
                <span>seconds.</span>
            </label>

        </div>

        <div class="control">

            <label class="horizontal-stack">
                <span>Pause</span>
                <input type="number"
                       min="3"
                       max="10"
                       step="1"
                       x-model.number="duration.between">
                <span>seconds between exercises.</span>
            </label>

        </div>

        <div class="control">

            <label class="horizontal-stack">
                <input min="3"
                       step="1"
                       type="number"
                       x-model.number="duration.buffer">
                <span>seconds are needed before the exercises.</span>
            </label>

        </div>

        <div class="control">

            <div class="horizontal-line">

                <label class="horizontal-stack">
                    <span>Play</span>
                    <select x-model="soundEffect.start">
                        <template x-for="effect in soundEffects">
                            <option :key="effect.sound"
                                    x-bind:value="effect.sound"
                                    x-text="effect.name"></option>
                        </template>
                    </select>
                    <span>when the exercise starts</span>
                </label>

                <label class="horizontal-stack">
                    <span>, and</span>
                    <select x-model="soundEffect.stop">
                        <template x-for="effect in soundEffects">
                            <option :key="effect.sound"
                                    x-bind:value="effect.sound"
                                    x-text="effect.name"></option>
                        </template>
                    </select>
                    <span>when ends.</span>
                </label>

            </div>

        </div>

        <button type="button"
                x-on:click.prevent="start()">
            Start
        </button>

        <div>&nbsp;</div>

        <div class="text-small">
            Exercises from the
            <a href="https://www.thegreatcoursesplus.com/physiology-and-fitness">Physiology and Fitness</a>
            course, episode 36.
        </div>

    </section>

    <template x-if="state === states.BUFFER"
              key="state-buffer">
        <section>
            <div class="text-big text-center">Get ready...</div>
        </section>
    </template>

    <template x-if="state === states.STARTED"
              key="state-started">

        <section class="exercise vertical-stack">
            <audio autoplay x-bind:src="soundEffect.start"></audio>
            <div class="exercise__preview">
                <video width="640"
                       height="480"
                       autoplay
                       muted
                       loop
                       x-bind:src="exercise.video"></video>
            </div>

            <div class="exercise__info text-center text-medium">
                <strong x-text="exercise.name"></strong>
            </div>

            <div class="exercise__action horizontal-center-elements">

                <button type="button"
                        x-on:click.prevent="pause()">
                    Pause
                </button>

            </div>

        </section>

    </template>

    <template x-if="state === states.PAUSED"
              key="state-paused">
        <section>
            <div class="horizontal-stack horizontal-center-elements">
                <button type="button"
                        x-on:click.prevent="resume()">
                    Resume
                </button>
                <div>from <span x-text="exercise.name"></span></div>
            </div>
        </section>
    </template>

    <template x-if="state === states.BETWEEN"
              key="state-between">
        <section>
            <div class="text-center">
                <span class="text-medium">Next exercise</span><br>
                <strong class="text-big" x-text="exercise.name"></strong>
            </div>
        </section>
    </template>

    <template x-if="state === states.FINISHED"
              key="state-finished">
        <section>
            <div class="text-big text-center">...aaaaaaaaaaaaand done!</div>
        </section>
    </template>

</div>

<script src="src/main.js"></script>
</body>
</html>
